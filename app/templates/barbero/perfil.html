{% extends "barbero/barbero_base.html" %}

{% block content %}
<div class="panel-header">
    <h1 class="panel-title">{{ title }}</h1>
    <p style="color: var(--color-text-muted);">Informaci√≥n personal y estad√≠sticas</p>
</div>

<!-- Informaci√≥n personal -->
<section class="dashboard-section">
    <h2 class="section-title">üë§ Mi Informaci√≥n</h2>
    
    <div style="display: grid; grid-template-columns: auto 1fr; gap: 1rem; max-width: 600px;">
        <div style="display: flex; align-items: center; justify-content: center; width: 120px; height: 120px; background: var(--color-bg-dark); border-radius: 50%; border: 2px solid var(--color-border);">
            {% if barbero.imagen %}
                <img src="{{ url_for('static', filename='uploads/barberos/' + barbero.imagen) }}" 
                     alt="{{ barbero.nombre }}" 
                     style="width: 100%; height: 100%; object-fit: cover; border-radius: 50%;">
            {% else %}
                <span style="font-size: 3rem; color: var(--color-text-muted);">üë§</span>
            {% endif %}
        </div>
        
        <div style="display: flex; flex-direction: column; justify-content: center;">
            <h3 style="color: var(--color-text-primary); margin-bottom: 0.5rem;">{{ barbero.nombre }}</h3>
            <p style="color: var(--color-text-secondary); margin-bottom: 0.5rem;">
                <strong>Especialidad:</strong> {{ barbero.especialidad or 'No especificada' }}
            </p>
            <p style="color: var(--color-text-secondary); margin-bottom: 0.5rem;">
                <strong>Username:</strong> {{ barbero.username }}
            </p>
            <p style="color: var(--color-text-secondary); margin-bottom: 0.5rem;">
                <strong>Estado:</strong> 
                {% if barbero.activo %}
                    <span class="badge badge-success">Activo</span>
                {% else %}
                    <span class="badge badge-danger">Inactivo</span>
                {% endif %}
            </p>
            <p style="color: var(--color-text-secondary);">
                <strong>Acceso Web:</strong> 
                {% if barbero.tiene_acceso_web %}
                    <span class="badge badge-info">Habilitado</span>
                {% else %}
                    <span class="badge badge-warning">Deshabilitado</span>
                {% endif %}
            </p>
        </div>
    </div>
</section>

<!-- Estad√≠sticas del mes -->
<section class="dashboard-section">
    <h2 class="section-title">üìä Estad√≠sticas del Mes</h2>
    
    <div class="dashboard-stats">
        <div class="card">
            <h3>Citas Completadas</h3>
            <span class="count">{{ stats.completadas }}</span>
            <small style="color: var(--color-text-muted);">Este mes</small>
        </div>
        
        <div class="card">
            <h3>Citas Pendientes</h3>
            <span class="count">{{ stats.pendientes }}</span>
            <small style="color: var(--color-text-muted);">Por confirmar</small>
        </div>
        
        <div class="card">
            <h3>Citas Canceladas</h3>
            <span class="count">{{ stats.canceladas }}</span>
            <small style="color: var(--color-text-muted);">Este mes</small>
        </div>
    </div>
</section>

<!-- Horarios de Trabajo -->
<section class="dashboard-section">
    <h2 class="section-title">‚è∞ Mis Horarios de Trabajo</h2>
    
    {% if disponibilidades %}
    <div class="data-table-container">
        <table class="data-table">
            <thead>
                <tr>
                    <th>D√≠a</th>
                    <th>Hora Inicio</th>
                    <th>Hora Fin</th>
                    <th>Estado</th>
                </tr>
            </thead>
            <tbody>
                {% for disponibilidad in disponibilidades %}
                <tr>
                    <td>
                        <strong>
                            {% if disponibilidad.dia_semana == 0 %}üü¢ Lunes
                            {% elif disponibilidad.dia_semana == 1 %}üü¢ Martes
                            {% elif disponibilidad.dia_semana == 2 %}üü¢ Mi√©rcoles
                            {% elif disponibilidad.dia_semana == 3 %}üü¢ Jueves
                            {% elif disponibilidad.dia_semana == 4 %}üü¢ Viernes
                            {% elif disponibilidad.dia_semana == 5 %}üîµ S√°bado
                            {% elif disponibilidad.dia_semana == 6 %}üî¥ Domingo
                            {% endif %}
                        </strong>
                    </td>
                    <td>
                        <span style="font-weight: 600; color: var(--color-primary);">
                            {{ disponibilidad.hora_inicio.strftime('%H:%M') }}
                        </span>
                    </td>
                    <td>
                        <span style="font-weight: 600; color: var(--color-primary);">
                            {{ disponibilidad.hora_fin.strftime('%H:%M') }}
                        </span>
                    </td>
                    <td>
                        {% if disponibilidad.activo %}
                            <span class="badge badge-success">‚úÖ Activo</span>
                        {% else %}
                            <span class="badge badge-danger">‚ùå Inactivo</span>
                        {% endif %}
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
    
    <div style="background: var(--color-bg-dark); padding: 1.5rem; border-radius: 6px; border-left: 4px solid var(--color-info); margin-top: 1.5rem;">
        <h4 style="color: var(--color-info); margin-bottom: 1rem;">‚ÑπÔ∏è Informaci√≥n sobre tus horarios</h4>
        <ul style="color: var(--color-text-secondary); line-height: 1.8;">
            <li><strong>Horario est√°ndar:</strong> Lunes a S√°bado de 8:00 a 12:00 y de 13:00 a 20:00</li>
            <li><strong>Solo puedes recibir citas</strong> durante estos horarios activos</li>
            <li><strong>Para cambios en tu horario,</strong> contacta al administrador del sistema</li>
            <li><strong>Los domingos</strong> normalmente est√°n cerrados, salvo excepciones</li>
        </ul>
    </div>
    
    {% else %}
    <div style="text-align: center; padding: 3rem; color: var(--color-text-muted);">
        <h3 style="color: var(--color-text-secondary); margin-bottom: 1rem;">‚è∞ No tienes horarios configurados</h3>
        <p style="font-size: 1.1rem; margin-bottom: 1.5rem;">
            Necesitas que el administrador configure tu horario de trabajo para poder recibir citas.
        </p>
        <div style="background: var(--color-bg-dark); padding: 1.5rem; border-radius: 6px; border-left: 4px solid var(--color-warning);">
            <h5 style="color: var(--color-warning); margin-bottom: 0.8rem;">‚ö†Ô∏è Acci√≥n requerida</h5>
            <p style="color: var(--color-text-secondary);">
                Contacta al administrador para configurar tu disponibilidad horaria. 
                Sin horarios configurados, no podr√°s recibir nuevas citas.
            </p>
        </div>
    </div>
    {% endif %}
</section>

<!-- Informaci√≥n adicional -->
<section class="dashboard-section">
    <h2 class="section-title">‚ÑπÔ∏è Informaci√≥n de la Cuenta</h2>
    
    <div style="background: var(--color-bg-dark); padding: 1.5rem; border-radius: 6px; border-left: 4px solid var(--color-primary);">
        <h4 style="color: var(--color-primary); margin-bottom: 1rem;">Sobre tu cuenta</h4>
        <ul style="color: var(--color-text-secondary); line-height: 1.8;">
            <li>Tu informaci√≥n personal es gestionada por el administrador</li>
            <li>Puedes ver y gestionar tus propias citas</li>
            <li>Las estad√≠sticas se actualizan autom√°ticamente</li>
            <li>Para cambios en tu perfil, contacta al administrador</li>
        </ul>
        
        {% if barbero.descripcion %}
        <div style="margin-top: 1.5rem; padding-top: 1rem; border-top: 1px solid var(--color-border);">
            <h5 style="color: var(--color-accent); margin-bottom: 0.5rem;">Descripci√≥n:</h5>
            <p style="color: var(--color-text-secondary); line-height: 1.6;">{{ barbero.descripcion }}</p>
        </div>
        {% endif %}
    </div>
</section>

<div style="text-align: center; margin-top: 2rem;">
    <a href="{{ url_for('barbero.dashboard') }}" class="btn btn-outline">
        üè† Volver al Dashboard
    </a>
</div>

{% endblock %} 